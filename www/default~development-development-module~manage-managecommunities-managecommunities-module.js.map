{"version":3,"sources":["./src/app/pages/manage/development/development.page.html","./src/app/pages/manage/development/development.module.ts","./src/app/pages/manage/development/development.page.scss","./src/app/pages/manage/development/development.page.ts"],"names":[],"mappings":"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","file":"default~development-development-module~manage-managecommunities-managecommunities-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar *ngIf=\\\"modalPage\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"closeModal()\\\"><ion-icon name=\\\"chevron-back-outline\\\"></ion-icon></ion-button>\\n    </ion-buttons>\\n    <ion-title>Development</ion-title>\\n  </ion-toolbar>\\n  <ion-toolbar>\\n    <ion-searchbar [(ngModel)]=\\\"searchKeyword\\\" debounce=\\\"500\\\" (ionChange)=\\\"executeSearch($event)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-buttons class=\\\"ion-justify-content-center ion-margin-top\\\">\\n    <ion-button shape=\\\"round\\\" fill=\\\"solid\\\" color=\\\"primary\\\" size=\\\"small\\\" (click)=\\\"createActivity($event)\\\">Create Sample Activity</ion-button>\\n  </ion-buttons>\\n  <ion-list>\\n    <div *ngFor=\\\"let parent of moments\\\">\\n      <ion-label class=\\\"program-title ion-margin\\\">{{parent.matrix_string[0][0]}}</ion-label>\\n      <ion-item *ngFor=\\\"let moment of parent.sample_activities\\\" (click)=\\\"showActivity(moment)\\\">\\n        <ion-thumbnail slot=\\\"start\\\">\\n          <img *ngIf=\\\"moment.assets?.length\\\" [src]=\\\"moment.assets[0]\\\"/>\\n          <img *ngIf=\\\"!moment.assets.length\\\" src=\\\"assets/img/group-default.png\\\"/>\\n        </ion-thumbnail>\\n        <ion-label>\\n          <h2 class=\\\"ion-text-wrap\\\">{{moment.matrix_string[0][0]}}</h2>\\n        </ion-label>\\n        <ion-badge [color]=\\\"momentService.loadIcon(moment.resource.field).color\\\">{{moment.resource['en-US'].value[0]}}</ion-badge>\\n        <!--<ion-badge slot=\\\"end\\\">{{moment.members.length}}</ion-badge>-->\\n      </ion-item>\\n    </div>\\n    <ion-item-divider class=\\\"ion-text-wrap\\\">\\n      Displaying {{moments.length}}&nbsp;<span *ngIf=\\\"moments.length <= 1\\\"> activity</span><span *ngIf=\\\"moments.length > 1\\\"> activities</span>\\n    </ion-item-divider>\\n  </ion-list>\\n  <ion-infinite-scroll position=\\\"bottom\\\" (ionInfinite)=\\\"manageMoreActivities($event)\\\">\\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <ion-grid style=\\\"height: 100%\\\" *ngIf=\\\"ionSpinner\\\">\\n    <ion-row class=\\\"ion-justify-content-start ion-align-items-center\\\" style=\\\"height: 100%\\\">\\n      <ion-spinner name=\\\"dots\\\"></ion-spinner>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DevelopmentPage } from './development.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DevelopmentPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DevelopmentPage]\n})\nexport class DevelopmentPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21hbmFnZS9kZXZlbG9wbWVudC9kZXZlbG9wbWVudC5wYWdlLnNjc3MifQ== */\"","import {Component, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {\n  IonInfiniteScroll,\n  ModalController,\n  Platform,\n} from \"@ionic/angular\";\nimport {Storage} from \"@ionic/storage\";\nimport {Auth} from \"../../../services/auth.service\";\nimport {Chat} from \"../../../services/chat.service\";\nimport {UserData} from \"../../../services/user.service\";\nimport {Moment} from \"../../../services/moment.service\";\nimport {Resource} from \"../../../services/resource.service\";\nimport {ShowfeaturePage} from \"../../feature/showfeature/showfeature.page\";\nimport {EditfeaturePage} from \"../../feature/editfeature/editfeature.page\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n  selector: 'app-development',\n  templateUrl: './development.page.html',\n  styleUrls: ['./development.page.scss'],\n})\nexport class DevelopmentPage implements OnInit, OnDestroy {\n  @ViewChild(IonInfiniteScroll, {static: false}) infiniteScroll: IonInfiniteScroll;\n\n  @Input() modalPage: any;\n  moments = [];\n  ionSpinner = false;\n  pageNum: number = 0;\n  reachedEnd: boolean = false;\n  conversation: any;\n  members: any = [];\n  searchKeyword = '';\n  refreshNeeded = false;\n  subscriptions: any = {};\n\n  constructor(\n      public router: Router,\n      private storage: Storage,\n      private platform: Platform,\n      private authService: Auth,\n      private chatService: Chat,\n      public userData: UserData,\n      public momentService: Moment,\n      private resourceService: Resource,\n      private modalCtrl: ModalController) {}\n\n  ngOnInit() {\n    if (this.userData && this.userData.currentCommunityAdminStatus) {\n      this.setupManageActivities();\n    }\n\n    // PWA fast load listener + reload listener\n    this.subscriptions['refreshUserStatus'] = this.userData.refreshUserStatus$.subscribe(this.refreshHandler);\n  }\n\n  refreshHandler = (data) => {\n    if (data && data.type === 'load community ready') {\n      this.setupManageActivities();\n    }\n  };\n\n  //-----------------------------------\n  // methods to search for activities\n  //-----------------------------------\n\n  async setupManageActivities() {\n    setTimeout(async () => {\n      this.infiniteScroll.disabled = false;\n      this.reachedEnd = false;\n      this.moments = [];\n      this.pageNum = 0;\n      this.manageMoreActivities({target: this.infiniteScroll});\n    }, 50);\n  }\n\n  async manageMoreActivities(event) {\n    this.pageNum++;\n    if (!this.reachedEnd) {\n      const moments: any = await this.momentService.loadSampleActivities(null);\n      this.ionSpinner = false;\n      // temp overide the paging function: i.e. only load page 1\n        this.reachedEnd = true;\n        event.target.disabled = true;\n      if (!moments.length) {\n        this.reachedEnd = true;\n        event.target.disabled = true;\n      } else {\n        this.moments = moments;\n      }\n      event.target.complete();\n    } else {\n      this.ionSpinner = false;\n      event.target.complete();\n    }\n  }\n\n  async showActivity(activity) {\n    if (this.modalPage) {\n      const showActivity = await this.modalCtrl.create({component: ShowfeaturePage,\n        componentProps: {moment: activity, modalPage: true}} );\n      await showActivity.present();\n      const {data: refreshNeeded} = await showActivity.onDidDismiss();\n      if (refreshNeeded) {\n        this.setupManageActivities();\n      }\n    } else {\n      this.router.navigateByUrl('/app/manage/activity/' + activity._id);\n    }\n  }\n\n  executeSearch(event) {\n    event.stopPropagation();\n    this.ionSpinner = true;\n    this.setupManageActivities();\n  }\n\n  async createActivity(event) {\n    event.stopPropagation();\n    this.ionSpinner = true;\n    const editActivity = await this.modalCtrl.create({component: EditfeaturePage, componentProps: { modalPage: true }});\n    await editActivity.present();\n    this.ionSpinner = false;\n    const {data: moment} = await editActivity.onDidDismiss();\n    if (moment) {\n      this.momentService.share(moment);\n      this.setupManageActivities();\n    }\n  }\n\n  closeModal() {\n    this.modalCtrl.dismiss(this.refreshNeeded);\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions['refreshUserStatus'].unsubscribe(this.refreshHandler);\n  }\n}\n"],"sourceRoot":"webpack:///"}