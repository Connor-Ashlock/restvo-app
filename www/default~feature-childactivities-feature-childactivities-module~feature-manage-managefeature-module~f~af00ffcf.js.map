{"version":3,"sources":["./src/app/pages/feature/manage/feature-childactivities/feature-childactivities.page.html","./src/app/pages/feature/manage/feature-childactivities/feature-childactivities.page.scss","./src/app/pages/feature/manage/feature-childactivities/feature-childactivities.page.ts"],"names":[],"mappings":"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","file":"default~feature-childactivities-feature-childactivities-module~feature-manage-managefeature-module~f~af00ffcf.js","sourcesContent":["export default \"<ion-header *ngIf=\\\"modalPage\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"closeModal()\\\"><ion-icon name=\\\"chevron-back-outline\\\"></ion-icon></ion-button>\\n    </ion-buttons>\\n    <ion-title>{{this.categoryLabel}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-list-header *ngIf=\\\"categoryId !== '5c915476e172e4e64590e349'\\\"> <!--non Plan child Activities-->\\n      <ion-label>New Mentoring {{this.categoryLabel}} (Available in Library)</ion-label>\\n    </ion-list-header>\\n    <ion-list-header *ngIf=\\\"categoryId === '5c915476e172e4e64590e349' && moment.categories.includes('5dfdbb547b00ea76b75e5a70')\\\"> <!--Plan shown in Relationship-->\\n      <ion-label>Adopted {{this.categoryLabel}}</ion-label>\\n    </ion-list-header>\\n    <ion-list-header *ngIf=\\\"categoryId === '5c915476e172e4e64590e349' && !moment.categories.includes('5dfdbb547b00ea76b75e5a70')\\\"> <!--Plan shown in non-Relationship-->\\n      <ion-label>Available {{this.categoryLabel}}</ion-label>\\n    </ion-list-header>\\n    <ion-grid class=\\\"program-grid\\\">\\n      <ion-row class=\\\"program-row\\\">\\n        <ion-col class=\\\"ion-align-self-center\\\" size-xs=\\\"6\\\" size-sm=\\\"4\\\" size-md=\\\"3\\\" size-lg=\\\"3\\\" size-xl=\\\"3\\\">\\n          <ion-card class=\\\"program-card\\\" (click)=\\\"chooseChildActivity()\\\" id=\\\"create-new-moment\\\">\\n            <ion-card-header class=\\\"ion-no-padding\\\" color=\\\"lightgrey\\\">\\n              <ion-row class=\\\"program-photo-container ion-justify-content-center ion-align-items-center\\\">\\n                <ion-icon name=\\\"add\\\" color=\\\"darkgrey\\\"></ion-icon>\\n              </ion-row>\\n            </ion-card-header>\\n            <div class=\\\"program-name dark\\\">Add</div>\\n          </ion-card>\\n        </ion-col>\\n        <ion-col class=\\\"ion-align-self-center\\\" *ngFor=\\\"let sample of samples; index as i\\\" size-xs=\\\"6\\\" size-sm=\\\"4\\\" size-md=\\\"3\\\" size-lg=\\\"3\\\" size-xl=\\\"3\\\" [hidden]=\\\"!((sample.matrix_string[0][0].toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1 || sample.resource['en-US'].value[0].toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1) && sample.array_boolean[1])\\\">\\n          <ion-card class=\\\"program-card\\\" (click)=\\\"openChildActivity(sample)\\\">\\n            <ion-card-header class=\\\"ion-no-padding\\\">\\n              <div class=\\\"program-photo-container\\\">\\n                <ion-img class=\\\"program-photo\\\" [src]=\\\"(sample.assets && sample.assets.length && sample.assets[0]) | background: sample._id\\\"></ion-img>\\n              </div>\\n            </ion-card-header>\\n            <div class=\\\"program-type\\\"><ion-badge color=\\\"button1\\\">{{sample.resource['en-US'].value[0]}}</ion-badge></div>\\n            <div class=\\\"program-name light\\\">{{sample.matrix_string[0][0]}}</div>\\n            <!--<ion-button class=\\\"info-moment ion-no-padding ion-no-margin\\\" (click)=\\\"openActivity($event, sample)\\\" fill=\\\"clear\\\" size=\\\"small\\\">\\n              <ion-icon name=\\\"information-circle-outline\\\" color=\\\"secondary\\\"></ion-icon>\\n            </ion-button>-->\\n            <ion-button class=\\\"info-moment ion-no-padding ion-no-margin\\\" (click)=\\\"removeActivity($event, sample)\\\" fill=\\\"clear\\\" size=\\\"small\\\" *ngIf=\\\"categoryId === '5c915476e172e4e64590e349'\\\">\\n              <ion-icon name=\\\"close\\\" color=\\\"primary\\\"></ion-icon>\\n            </ion-button>\\n          </ion-card>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n    <ion-list-header *ngIf=\\\"categoryId !== '5c915476e172e4e64590e349'\\\"> <!--Only show for non-Plan child Activities-->\\n      <ion-label>All Mentoring {{this.categoryLabel}}</ion-label>\\n    </ion-list-header>\\n    <ion-grid class=\\\"program-grid\\\">\\n      <ion-row class=\\\"program-row\\\">\\n        <ion-col class=\\\"ion-align-self-center\\\" *ngFor=\\\"let sample of samples; index as i\\\" size-xs=\\\"6\\\" size-sm=\\\"4\\\" size-md=\\\"3\\\" size-lg=\\\"3\\\" size-xl=\\\"3\\\" [hidden]=\\\"!((sample.matrix_string[0][0].toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1 || sample.resource['en-US'].value[0].toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1) && !sample.array_boolean[1])\\\">\\n          <ion-card class=\\\"program-card\\\" (click)=\\\"openChildActivity(sample)\\\">\\n            <ion-card-header class=\\\"ion-no-padding\\\">\\n              <div class=\\\"program-photo-container\\\">\\n                <ion-img class=\\\"program-photo\\\" [src]=\\\"(sample.assets && sample.assets.length && sample.assets[0]) | background: sample._id\\\"></ion-img>\\n              </div>\\n            </ion-card-header>\\n            <div class=\\\"program-type\\\"><ion-badge color=\\\"button1\\\">{{sample.resource['en-US'].value[0]}}</ion-badge></div>\\n            <div class=\\\"program-name light\\\">{{sample.matrix_string[0][0]}}</div>\\n          </ion-card>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-list>\\n\\n</ion-content>\\n\"","export default \"app-feature-childactivities .program-row {\\n  max-height: 70%;\\n  overflow: scroll;\\n}\\napp-feature-childactivities .program-card {\\n  width: auto;\\n  -o-object-fit: contain;\\n     object-fit: contain;\\n  margin: 0 3%;\\n}\\napp-feature-childactivities .program-photo-container {\\n  height: 80px;\\n  overflow: hidden;\\n}\\napp-feature-childactivities .program-photo {\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  cursor: pointer;\\n  height: 100%;\\n  margin: auto;\\n  display: block;\\n}\\napp-feature-childactivities .program-type {\\n  position: absolute;\\n  top: 2%;\\n  left: 2%;\\n  font-size: 12px;\\n  cursor: pointer;\\n}\\napp-feature-childactivities .program-name {\\n  position: absolute;\\n  bottom: 2%;\\n  left: 2%;\\n  font-size: 12px;\\n  cursor: pointer;\\n  z-index: 15;\\n}\\napp-feature-childactivities .remove-moment {\\n  position: absolute;\\n  top: 0;\\n  right: 2px;\\n}\\napp-feature-childactivities .dark {\\n  color: var(--ion-color-darkgrey);\\n}\\napp-feature-childactivities .light {\\n  color: white;\\n}\\napp-feature-childactivities .full-height {\\n  height: 100%;\\n}\\napp-feature-childactivities .grid-row {\\n  overflow: scroll;\\n}\\napp-feature-childactivities .selected {\\n  opacity: 1;\\n}\\napp-feature-childactivities .info-moment {\\n  position: absolute;\\n  top: 0;\\n  right: 2px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jYWxpeGh1YW5nL1dlYl9EZXZlbG9wbWVudC9yZXN0dm8vcmVzdHZvLWFwcC9zcmMvYXBwL3BhZ2VzL2ZlYXR1cmUvbWFuYWdlL2ZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzL2ZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvZmVhdHVyZS9tYW5hZ2UvZmVhdHVyZS1jaGlsZGFjdGl2aXRpZXMvZmVhdHVyZS1jaGlsZGFjdGl2aXRpZXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVFO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0FDREo7QURJRTtFQUNFLFdBQUE7RUFDQSxzQkFBQTtLQUFBLG1CQUFBO0VBQ0EsWUFBQTtBQ0ZKO0FES0U7RUFDRSxZQUFBO0VBQ0EsZ0JBQUE7QUNISjtBRE1FO0VBQ0Usb0JBQUE7S0FBQSxpQkFBQTtFQUNBLGVBQUE7RUFFQSxZQUFBO0VBRUEsWUFBQTtFQUNBLGNBQUE7QUNOSjtBRFVFO0VBQ0Usa0JBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0FDUko7QURXRTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLFFBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLFdBQUE7QUNUSjtBRFlFO0VBQ0Usa0JBQUE7RUFDQSxNQUFBO0VBQ0EsVUFBQTtBQ1ZKO0FEYUU7RUFDRSxnQ0FBQTtBQ1hKO0FEY0U7RUFDRSxZQUFBO0FDWko7QURlRTtFQUNFLFlBQUE7QUNiSjtBRGdCRTtFQUVFLGdCQUFBO0FDZko7QURrQkU7RUFDRSxVQUFBO0FDaEJKO0FEbUJFO0VBQ0Usa0JBQUE7RUFDQSxNQUFBO0VBQ0EsVUFBQTtBQ2pCSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ZlYXR1cmUvbWFuYWdlL2ZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzL2ZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImFwcC1mZWF0dXJlLWNoaWxkYWN0aXZpdGllcyB7XG5cbiAgLnByb2dyYW0tcm93IHtcbiAgICBtYXgtaGVpZ2h0OiA3MCU7XG4gICAgb3ZlcmZsb3c6IHNjcm9sbDtcbiAgfVxuXG4gIC5wcm9ncmFtLWNhcmQge1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIG9iamVjdC1maXQ6IGNvbnRhaW47XG4gICAgbWFyZ2luOiAwIDMlO1xuICB9XG5cbiAgLnByb2dyYW0tcGhvdG8tY29udGFpbmVyIHtcbiAgICBoZWlnaHQ6IDgwcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgfVxuXG4gIC5wcm9ncmFtLXBob3RvIHtcbiAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgLy9vcGFjaXR5OiA1MCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIC8vd2lkdGg6IDEwMCU7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIC8vbWF4LWhlaWdodDogMjAwcHg7XG4gIH1cblxuICAucHJvZ3JhbS10eXBlIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAyJTtcbiAgICBsZWZ0OiAyJTtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5cbiAgLnByb2dyYW0tbmFtZSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogMiU7XG4gICAgbGVmdDogMiU7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB6LWluZGV4OiAxNTtcbiAgfVxuXG4gIC5yZW1vdmUtbW9tZW50IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIHJpZ2h0OiAycHg7XG4gIH1cblxuICAuZGFyayB7XG4gICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrZ3JleSk7XG4gIH1cblxuICAubGlnaHQge1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuXG4gIC5mdWxsLWhlaWdodCB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG5cbiAgLmdyaWQtcm93IHtcbiAgICAvL2FsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICBvdmVyZmxvdzogc2Nyb2xsO1xuICB9XG5cbiAgLnNlbGVjdGVkIHtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG5cbiAgLmluZm8tbW9tZW50IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIHJpZ2h0OiAycHg7XG4gIH1cbn0iLCJhcHAtZmVhdHVyZS1jaGlsZGFjdGl2aXRpZXMgLnByb2dyYW0tcm93IHtcbiAgbWF4LWhlaWdodDogNzAlO1xuICBvdmVyZmxvdzogc2Nyb2xsO1xufVxuYXBwLWZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzIC5wcm9ncmFtLWNhcmQge1xuICB3aWR0aDogYXV0bztcbiAgb2JqZWN0LWZpdDogY29udGFpbjtcbiAgbWFyZ2luOiAwIDMlO1xufVxuYXBwLWZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzIC5wcm9ncmFtLXBob3RvLWNvbnRhaW5lciB7XG4gIGhlaWdodDogODBweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cbmFwcC1mZWF0dXJlLWNoaWxkYWN0aXZpdGllcyAucHJvZ3JhbS1waG90byB7XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGhlaWdodDogMTAwJTtcbiAgbWFyZ2luOiBhdXRvO1xuICBkaXNwbGF5OiBibG9jaztcbn1cbmFwcC1mZWF0dXJlLWNoaWxkYWN0aXZpdGllcyAucHJvZ3JhbS10eXBlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDIlO1xuICBsZWZ0OiAyJTtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5hcHAtZmVhdHVyZS1jaGlsZGFjdGl2aXRpZXMgLnByb2dyYW0tbmFtZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiAyJTtcbiAgbGVmdDogMiU7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB6LWluZGV4OiAxNTtcbn1cbmFwcC1mZWF0dXJlLWNoaWxkYWN0aXZpdGllcyAucmVtb3ZlLW1vbWVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICByaWdodDogMnB4O1xufVxuYXBwLWZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzIC5kYXJrIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrZ3JleSk7XG59XG5hcHAtZmVhdHVyZS1jaGlsZGFjdGl2aXRpZXMgLmxpZ2h0IHtcbiAgY29sb3I6IHdoaXRlO1xufVxuYXBwLWZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzIC5mdWxsLWhlaWdodCB7XG4gIGhlaWdodDogMTAwJTtcbn1cbmFwcC1mZWF0dXJlLWNoaWxkYWN0aXZpdGllcyAuZ3JpZC1yb3cge1xuICBvdmVyZmxvdzogc2Nyb2xsO1xufVxuYXBwLWZlYXR1cmUtY2hpbGRhY3Rpdml0aWVzIC5zZWxlY3RlZCB7XG4gIG9wYWNpdHk6IDE7XG59XG5hcHAtZmVhdHVyZS1jaGlsZGFjdGl2aXRpZXMgLmluZm8tbW9tZW50IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAycHg7XG59Il19 */\"","import {Component, Input, OnDestroy, OnInit, ViewEncapsulation} from '@angular/core';\nimport {ModalController, Platform} from \"@ionic/angular\";\nimport {PickfeaturePopoverPage} from \"../../pickfeature-popover/pickfeature-popover.page\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {Auth} from \"../../../../services/auth.service\";\nimport {Chat} from \"../../../../services/chat.service\";\nimport {UserData} from \"../../../../services/user.service\";\nimport {Moment} from \"../../../../services/moment.service\";\nimport {Resource} from \"../../../../services/resource.service\";\nimport {ManagefeaturePage} from \"../managefeature.page\";\n\n@Component({\n  selector: 'app-feature-childactivities',\n  templateUrl: './feature-childactivities.page.html',\n  styleUrls: ['./feature-childactivities.page.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class FeatureChildActivitiesPage implements OnInit, OnDestroy {\n\n  @Input() modalPage: any;\n  @Input() moment: any; // the moment object\n  @Input() categoryId: any; // the category ID\n  subscriptions: any = {};\n  momentId: any;\n  categoryLabel = '';\n  ionSpinner = false;\n  samples: any;\n  searchKeyword = '';\n  refreshNeeded = false;\n\n  constructor(\n      public route: ActivatedRoute,\n      public router: Router,\n      public platform: Platform,\n      public authService: Auth,\n      public chatService: Chat,\n      public userData: UserData,\n      public momentService: Moment,\n      public resourceService: Resource,\n      public modalCtrl: ModalController\n  ) { }\n\n  async ngOnInit() {\n    await this.resourceService.loadSystemResources();\n    // link the refreshUserStatus Observable with the loadChildActivities handler. It fires on page loads and subsequent user status refresh\n    this.subscriptions['refreshUserStatus'] = this.userData.refreshUserStatus$.subscribe(this.reloadChildActivitiesHandler);\n  }\n\n  reloadChildActivitiesHandler = async () => {\n    this.setupChildActivitiesPage();\n  };\n\n  async setupChildActivitiesPage() {\n    if (this.userData && this.userData.user) {\n      if (this.moment) {\n        this.momentId = this.moment._id;\n      } else {\n        this.momentId = this.route.snapshot.paramMap.get('id'); // the moment object\n        this.moment = await this.momentService.load(this.momentId);\n        this.moment.categories = this.moment.categories.map((c) => c._id);\n      }\n      this.categoryId = this.categoryId || this.route.snapshot.paramMap.get('categoryId');\n      this.categoryLabel = this.resourceService.categories.find((c) => c._id === this.categoryId)['en-US'].value[0] + 's';\n      this.loadChildActivities();\n    }\n  }\n\n  // load Program child activities\n  async loadChildActivities() {\n      this.samples = await this.momentService.loadProgramChildActivities(this.momentId, this.categoryId);\n  }\n\n  async openChildActivity(moment) {\n    if (this.modalPage || this.platform.width() < 768) {\n      // for community or program, manage mode\n      if ((moment.categories.map((c) => c._id).includes('5c915324e172e4e64590e346') || moment.categories.map((c) => c._id).includes('5c915475e172e4e64590e348'))) {\n        this.momentService.manageMoment({ moment: moment, modalPage: true });\n      } else { // for relationship and other Activities, open Moment\n        this.momentService.openMoment( { moment: moment, modalPage: true });\n      }\n    } else {\n      if (this.router.url.includes('app/manage')) { // if opened from Manage mode\n        this.router.navigate(['/app/manage/activity/' + moment._id + '/profile/' + moment._id], {replaceUrl: false});\n      } else { // such case does not exist yet. User should always open from the User -> About Me\n        this.router.navigate(['/app/activity/' + moment._id], { replaceUrl: false });\n      }\n    }\n  }\n\n  async chooseChildActivity() {\n      let componentProps: any;\n      componentProps = {title: 'Choose from Library', categoryId: this.categoryId, allowCreate: true, allowSwitchCategory: false, modalPage: true };\n      if (this.categoryId === '5e17acd47b00ea76b75e5a71') { // Pick onboarding flows\n          componentProps.programId = this.momentId;\n      } else if (this.categoryId === '5c915476e172e4e64590e349') { // pick plan\n          componentProps.parent_programId = this.momentId;\n          componentProps.maxMomentCount = 1;\n          if (this.moment.categories.includes('5dfdbb547b00ea76b75e5a70')) { // in relationships, disable create. Only choosing is allowed. It's because creation needs to take place on the program level in order that a Plan's parent_programs is registered correctly\n            componentProps.allowCreate = false;\n          }\n      } else { // pick other activities\n          componentProps.parent_programId = this.momentId;\n      }\n    const modal = await this.modalCtrl.create({component: PickfeaturePopoverPage, componentProps: componentProps});\n    await modal.present();\n    const {data: moments} = await modal.onDidDismiss();\n    if (moments && moments.length) {\n      // if choosing Plans as child activities\n      if (this.categoryId === '5c915476e172e4e64590e349') {\n        // only if schedule is enabled (e.g. relationships)\n        if (this.moment.resource.matrix_number[0].includes(10210)) {\n          await this.momentService.adoptPlan({\n            operation: 'adopt plan',\n            planIds: moments.map((moment) => moment._id),\n            parent_programId: this.momentId,\n          });\n        }\n      } else {\n        for (const moment of moments) {\n          // prepare relationship object for cloning. copy everything except calendar and add programId to parent_programs property\n          moment.calendar = { // reset the calendar\n            title: moment.matrix_string[0][0],\n            location: '',\n            notes: '',\n            startDate: new Date().toISOString(),\n            endDate: new Date().toISOString(),\n            options: {\n              firstReminderMinutes: 0,\n              secondReminderMinutes: 0,\n              reminders: []\n            }\n          };\n          moment.parent_programs = [this.momentId];\n        }\n        const clonedMoments: any = await this.momentService.clone(moments, 'admin'); // clone and do not add admin as participants\n        for (const clonedMoment of clonedMoments) {\n          const index = moments.map((moment) => moment.resource._id).indexOf(clonedMoment.resource);\n          if (index > -1) {\n            clonedMoment.resource = moments[index].resource; // clone the populated resource\n          }\n        }\n        this.samples.unshift(...clonedMoments);\n      }\n    }\n  }\n\n  async openActivity(event, activity) {\n    event.stopPropagation();\n    this.momentService.openMoment({ moment: activity, modalPage: true });\n  }\n\n  async removeActivity(event, activity) {\n    event.stopPropagation();\n    this.momentService.adoptPlan({\n      operation: 'un-adopt plan',\n      planIds: [activity._id],\n      parent_programId: this.momentId\n    });\n  }\n\n  closeModal() {\n    this.modalCtrl.dismiss();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions['refreshUserStatus'].unsubscribe();\n  }\n}\n"],"sourceRoot":"webpack:///"}